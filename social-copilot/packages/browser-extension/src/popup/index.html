<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Copilot</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      width: 360px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      color: #333;
    }
    .header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 16px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .header h1 {
      flex: 1;
      font-size: 16px;
      font-weight: 600;
    }
    .tabs {
      display: flex;
      border-bottom: 1px solid #eee;
    }
    .tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      border: none;
      background: none;
      font-size: 13px;
      color: #666;
      transition: all 0.2s;
    }
    .tab:hover {
      background: #f5f5f5;
    }
    .tab.active {
      color: #667eea;
      border-bottom: 2px solid #667eea;
      margin-bottom: -1px;
    }
    .tab-content {
      display: none;
      padding: 16px;
    }
    .tab-content.active {
      display: block;
    }
    .status {
      padding: 10px 12px;
      border-radius: 6px;
      margin-bottom: 16px;
      font-size: 13px;
    }
    .status.success {
      background: #e8f5e9;
      color: #2e7d32;
    }
    .status.warning {
      background: #fff3e0;
      color: #e65100;
    }
    .status.info {
      background: #e3f2fd;
      color: #1565c0;
    }
    .form-group {
      margin-bottom: 16px;
    }
    .form-group.inline {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      font-size: 13px;
    }
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
    }
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #667eea;
    }
    .form-group small {
      display: block;
      margin-top: 4px;
      color: #999;
      font-size: 11px;
    }
    button.primary {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: opacity 0.2s;
    }
    button.primary:hover {
      opacity: 0.9;
    }
    button.secondary {
      width: 100%;
      padding: 10px;
      background: #f5f5f5;
      color: #333;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      margin-top: 8px;
    }
    button.secondary:hover {
      background: #eee;
    }
    .style-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .style-option {
      padding: 6px 12px;
      border: 1px solid #ddd;
      border-radius: 16px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .style-option:hover {
      border-color: #667eea;
    }
    .style-option.selected {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }
    .contact-list {
      max-height: 200px;
      overflow-y: auto;
    }
    .contact-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      flex-direction: column;
      gap: 8px;
    }
    .contact-item:hover {
      background: #f9f9f9;
    }
    .contact-header {
      display: flex;
      align-items: center;
      width: 100%;
      gap: 12px;
    }
    .contact-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      margin-right: 12px;
    }
    .contact-info {
      flex: 1;
    }
    .contact-name {
      font-weight: 500;
      font-size: 13px;
    }
    .contact-meta {
      font-size: 11px;
      color: #999;
    }
    .contact-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .reset-btn {
      padding: 6px 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #fff;
      color: #555;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }
    .reset-btn:hover {
      border-color: #667eea;
      color: #667eea;
    }
    .empty-state {
      text-align: center;
      padding: 24px;
      color: #999;
    }
    .shortcut-hint {
      margin-top: 16px;
      padding: 12px;
      background: #f9f9f9;
      border-radius: 6px;
      font-size: 12px;
      color: #666;
    }
    .shortcut-hint kbd {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 3px;
      padding: 2px 6px;
      font-family: monospace;
    }
    .style-stats {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      width: 100%;
      padding-left: 48px;
    }
    .memory-box {
      width: 100%;
      padding-left: 48px;
      padding-bottom: 4px;
      font-size: 12px;
      color: #666;
      line-height: 1.5;
    }
    .memory-title {
      font-weight: 600;
      color: #333;
      margin-top: 6px;
      margin-bottom: 2px;
    }
    .memory-text {
      white-space: pre-wrap;
      word-break: break-word;
    }
    .style-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 14px;
      background: #f3f4ff;
      color: #4c51bf;
      font-size: 12px;
      border: 1px solid #e0e3ff;
    }
    .style-pill strong {
      font-weight: 700;
      color: #333;
    }
    .muted {
      color: #999;
      font-size: 12px;
    }
    .hidden {
      display: none;
    }
    .fallback-card {
      padding: 12px;
      border: 1px dashed #d6d9f5;
      border-radius: 10px;
      background: #f7f8ff;
    }
  </style>
</head>
<body>
  <div class="header">
    <span>ğŸ’¬</span>
    <h1>Social Copilot</h1>
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="settings">è®¾ç½®</button>
    <button class="tab" data-tab="contacts">è”ç³»äºº</button>
    <button class="tab" data-tab="about">å…³äº</button>
  </div>

  <!-- è®¾ç½®é¡µ -->
  <div id="settings" class="tab-content active">
    <div id="status" class="status warning">æ­£åœ¨æ£€æŸ¥çŠ¶æ€...</div>

    <div class="form-group">
      <label for="provider">æ¨¡å‹æä¾›å•†</label>
      <select id="provider">
        <option value="deepseek">DeepSeek (æ¨è)</option>
        <option value="openai">OpenAI</option>
        <option value="claude">Claude</option>
      </select>
    </div>

    <div class="form-group">
      <label for="model">æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰</label>
      <input type="text" id="model" placeholder="ä¾‹å¦‚ï¼šdeepseek-v3.2" list="modelSuggestions" autocomplete="off">
      <datalist id="modelSuggestions"></datalist>
      <small id="modelHint" class="muted">ä¸å¡«å†™åˆ™ä½¿ç”¨é»˜è®¤æ¨¡å‹</small>
    </div>

    <div class="form-group">
      <label for="apiKey">API Key</label>
      <input type="password" id="apiKey" placeholder="sk-...">
      <small id="apiKeyHint">
        <a href="https://platform.deepseek.com/" target="_blank">è·å– DeepSeek API Key</a>
      </small>
    </div>

    <div class="form-group inline">
      <label for="persistApiKey" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="persistApiKey">
        è®°ä½ API Key
      </label>
      <small>ä¸å‹¾é€‰åˆ™å¯†é’¥ä»…æœ¬æ¬¡æµè§ˆå™¨ä¼šè¯æœ‰æ•ˆï¼ˆé‡å¯æµè§ˆå™¨éœ€é‡æ–°è¾“å…¥ï¼‰</small>
    </div>

    <div class="form-group inline">
      <label for="enableMemory" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="enableMemory">
        å¯ç”¨é•¿æœŸè®°å¿†
      </label>
      <small>åå°ä¼šæç‚¼å¹¶å­˜å‚¨è”ç³»äººæ‘˜è¦ï¼ˆé»˜è®¤å…³é—­ï¼‰</small>
    </div>

    <div class="form-group inline">
      <label for="enableFallback" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="enableFallback">
        å¯ç”¨å¤‡ç”¨æ¨¡å‹
      </label>
      <small>ä¸»æ¨¡å‹å¼‚å¸¸æ—¶è‡ªåŠ¨åˆ‡æ¢</small>
    </div>

    <div id="fallbackFields" class="fallback-card hidden">
      <div class="form-group">
        <label for="fallbackProvider">å¤‡ç”¨æ¨¡å‹</label>
        <select id="fallbackProvider">
          <option value="deepseek">DeepSeek</option>
          <option value="openai">OpenAI</option>
          <option value="claude">Claude</option>
        </select>
      </div>

      <div class="form-group">
        <label for="fallbackModel">å¤‡ç”¨æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰</label>
        <input type="text" id="fallbackModel" placeholder="ä¾‹å¦‚ï¼šdeepseek-r1-0528" list="fallbackModelSuggestions" autocomplete="off">
        <datalist id="fallbackModelSuggestions"></datalist>
        <small id="fallbackModelHint" class="muted">ä¸å¡«å†™åˆ™ä½¿ç”¨è¯¥æä¾›å•†é»˜è®¤æ¨¡å‹</small>
      </div>

      <div class="form-group">
        <label for="fallbackApiKey">å¤‡ç”¨ API Key</label>
        <input type="password" id="fallbackApiKey" placeholder="sk-...">
        <small id="fallbackApiKeyHint">
          <a href="https://platform.deepseek.com/" target="_blank">è·å– DeepSeek API Key</a>
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>é»˜è®¤å›å¤é£æ ¼</label>
      <div class="style-options">
        <span class="style-option selected" data-style="caring">ğŸ’— å…³å¿ƒ</span>
        <span class="style-option selected" data-style="humorous">ğŸ˜„ å¹½é»˜</span>
        <span class="style-option selected" data-style="casual">ğŸ˜Š éšæ„</span>
        <span class="style-option" data-style="rational">ğŸ§  ç†æ€§</span>
        <span class="style-option" data-style="formal">ğŸ“ æ­£å¼</span>
      </div>
    </div>

    <div class="form-group">
      <label for="suggestionCount">æ¯æ¬¡æ˜¾ç¤ºçš„å›å¤æ•°é‡</label>
      <select id="suggestionCount">
        <option value="3">3 æ¡ï¼ˆé»˜è®¤ï¼‰</option>
        <option value="2">2 æ¡</option>
      </select>
      <small class="muted">å½±å“æ¯æ¬¡ç”Ÿæˆçš„å›å¤å»ºè®®æ¡æ•°</small>
    </div>

    <button id="saveBtn" class="primary">ä¿å­˜è®¾ç½®</button>

    <div class="shortcut-hint">
      ğŸ’¡ å¿«æ·é”®ï¼šæŒ‰ <kbd>Alt</kbd> + <kbd>S</kbd> æ‰‹åŠ¨è§¦å‘å»ºè®®
    </div>
  </div>

  <!-- è”ç³»äººé¡µ -->
  <div id="contacts" class="tab-content">
    <div id="contactList" class="contact-list">
      <div class="empty-state">æš‚æ— è”ç³»äººè®°å½•</div>
    </div>
  </div>

  <!-- å…³äºé¡µ -->
  <div id="about" class="tab-content">
    <div class="status info">
      <strong>Social Copilot v0.1.0</strong><br>
      AI è¾…åŠ©ç¤¾äº¤ä¼´ä¾£
    </div>
    <p style="font-size: 13px; color: #666; line-height: 1.6;">
      ä¸ºèŠå¤©åº”ç”¨æä¾›æ™ºèƒ½å›å¤å»ºè®®ï¼Œæ”¯æŒ Telegram Webã€WhatsApp Webã€Slack Webã€‚
    </p>
    <p style="font-size: 13px; color: #666; line-height: 1.6; margin-top: 12px;">
      æ‰€æœ‰æ•°æ®é»˜è®¤å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¿æŠ¤æ‚¨çš„éšç§ã€‚
    </p>
    <button id="clearDataBtn" class="secondary">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>

    <div class="fallback-card" style="margin-top: 12px;">
      <div class="form-group inline" style="margin-bottom: 10px;">
        <label for="debugEnabled" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="debugEnabled">
          å¯ç”¨è¯Šæ–­æ—¥å¿—
        </label>
        <small class="muted">è®°å½•æœ€è¿‘è¯·æ±‚ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜</small>
      </div>
      <button id="copyDiagnosticsBtn" class="secondary">å¤åˆ¶è¯Šæ–­ä¿¡æ¯</button>
      <button id="downloadDiagnosticsBtn" class="secondary">ä¸‹è½½è¯Šæ–­ JSON</button>
      <button id="clearDiagnosticsBtn" class="secondary">æ¸…ç©ºè¯Šæ–­æ—¥å¿—</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
