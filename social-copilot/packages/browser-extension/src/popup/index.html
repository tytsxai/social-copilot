<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Copilot</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --muted-2: #94a3b8;
      --border: rgba(15, 23, 42, 0.12);
      --border-2: rgba(15, 23, 42, 0.08);
      --shadow: 0 12px 30px rgba(15, 23, 42, 0.10);
      --shadow-sm: 0 6px 18px rgba(15, 23, 42, 0.08);
      --primary: #5b5ef6;
      --primary-2: #7c3aed;
      --danger: #ef4444;
      --radius: 12px;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f172a;
        --card: #1e293b;
        --text: #f1f5f9;
        --muted: #94a3b8;
        --muted-2: #64748b;
        --border: rgba(241, 245, 249, 0.12);
        --border-2: rgba(241, 245, 249, 0.08);
        --shadow: 0 12px 30px rgba(0, 0, 0, 0.40);
        --shadow-sm: 0 6px 18px rgba(0, 0, 0, 0.25);
        --primary: #818cf8;
        --primary-2: #a78bfa;
        --danger: #f87171;
      }
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* ç»Ÿä¸€æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--muted-2);
    }

    /* ç„¦ç‚¹çŠ¶æ€è§„èŒƒåŒ– */
    :focus {
      outline: none;
    }

    :focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    html,
    body {
      width: 380px;
      min-width: 380px;
    }

    body {
      max-width: 100vw;
      max-height: 600px;
      overflow: hidden;
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 13px;
      line-height: 1.5;
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    .header {
      position: sticky;
      top: 0;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 14px 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #ffffff;
      box-shadow: var(--shadow-sm);
    }

    @media (prefers-color-scheme: dark) {
      .header {
        background: linear-gradient(135deg, #4c51bf 0%, #6b21a8 100%);
      }
    }

    .header h1 {
      flex: 1;
      font-size: 16px;
      font-weight: 650;
      letter-spacing: 0.2px;
    }

    .tabs {
      display: flex;
      gap: 0;
      margin: 10px 12px 0;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      background: rgba(255, 255, 255, 0.65);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-sm);
    }

    .tab {
      flex: 1;
      padding: 10px 8px;
      text-align: center;
      cursor: pointer;
      border: none;
      background: transparent;
      font-size: 12.5px;
      font-weight: 650;
      color: var(--muted);
      transition: all 0.12s ease;
      border-radius: var(--radius);
    }

    .tab:hover {
      background: rgba(15, 23, 42, 0.04);
      color: var(--text);
    }

    .tab:active {
      transform: translateY(1px) scale(0.98);
    }

    .tab:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: -3px;
    }

    .tab.active {
      color: var(--text);
      background: linear-gradient(135deg, rgba(91, 94, 246, 0.18) 0%, rgba(124, 58, 237, 0.14) 100%);
    }

    .tab-content {
      display: none;
      padding: 12px 12px 14px;
      margin: 10px 12px 12px;
      max-height: 520px;
      overflow-y: auto;
      overscroll-behavior: contain;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--card);
      box-shadow: var(--shadow);
    }

    .tab-content.active {
      display: block;
    }

    .status {
      padding: 10px 12px;
      border-radius: 10px;
      margin-bottom: 12px;
      font-size: 12.5px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.03);
    }

    .status.success {
      background: rgba(34, 197, 94, 0.10);
      border-color: rgba(34, 197, 94, 0.25);
      color: #166534;
    }

    @media (prefers-color-scheme: dark) {
      .status.success {
        background: rgba(34, 197, 94, 0.15);
        border-color: rgba(34, 197, 94, 0.30);
        color: #86efac;
      }
    }

    .status.warning {
      background: rgba(245, 158, 11, 0.12);
      border-color: rgba(245, 158, 11, 0.25);
      color: #92400e;
    }

    @media (prefers-color-scheme: dark) {
      .status.warning {
        background: rgba(245, 158, 11, 0.15);
        border-color: rgba(245, 158, 11, 0.30);
        color: #fcd34d;
      }
    }

    .status.info {
      background: rgba(59, 130, 246, 0.12);
      border-color: rgba(59, 130, 246, 0.25);
      color: #1e3a8a;
    }

    @media (prefers-color-scheme: dark) {
      .status.info {
        background: rgba(59, 130, 246, 0.15);
        border-color: rgba(59, 130, 246, 0.30);
        color: #93c5fd;
      }
    }

    .form-group {
      margin-bottom: 14px;
    }

    .form-group.inline {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px 12px;
      padding: 10px 12px;
      border: 1px solid var(--border-2);
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.02);
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 650;
      font-size: 12.5px;
      color: rgba(15, 23, 42, 0.86);
      word-wrap: break-word;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .form-group.inline label {
      margin-bottom: 0;
      display: flex;
      align-items: center;
      gap: 10px;
      line-height: 1.5;
      flex: 1 1 220px;
      min-width: 0;
      word-wrap: break-word;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .form-group.inline input[type="checkbox"] {
      margin-top: 0;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      font-size: 13px;
      background: var(--card);
      color: var(--text);
      transition: all 0.12s ease;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 96px;
      field-sizing: content;
    }

    .form-group input:focus-visible,
    .form-group select:focus-visible,
    .form-group textarea:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(91, 94, 246, 0.12);
    }

    .form-group small {
      display: block;
      margin-top: 6px;
      color: var(--muted);
      font-size: 11.5px;
      line-height: 1.35;
    }

    .form-group.inline small {
      margin: 0;
      color: var(--muted);
      flex: 1 1 160px;
      min-width: 0;
      word-wrap: break-word;
      word-break: break-word;
      overflow-wrap: anywhere;
      line-height: 1.4;
    }

    input[type="checkbox"] {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: var(--card);
      display: inline-grid;
      place-content: center;
      cursor: pointer;
      flex: none;
      transition: all 0.12s ease;
    }

    input[type="checkbox"]:hover {
      border-color: rgba(91, 94, 246, 0.45);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.08);
    }

    input[type="checkbox"]:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    input[type="checkbox"]::after {
      content: "";
      width: 5px;
      height: 9px;
      border-right: 2px solid #ffffff;
      border-bottom: 2px solid #ffffff;
      transform: rotate(45deg) scale(0);
      transform-origin: center;
      transition: transform 0.10s ease;
      margin-top: -1px;
    }

    input[type="checkbox"]:checked {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);
      border-color: rgba(91, 94, 246, 0.40);
      box-shadow: 0 6px 14px rgba(91, 94, 246, 0.20);
    }

    input[type="checkbox"]:checked::after {
      transform: rotate(45deg) scale(1);
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      background: transparent;
      cursor: pointer;
      border: none;
      margin: 10px 0;
    }

    input[type="range"]::-webkit-slider-runnable-track {
      width: 100%;
      height: 6px;
      background: var(--border-2);
      border-radius: 6px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      height: 18px;
      width: 18px;
      background: var(--primary);
      border-radius: 50%;
      margin-top: -6px;
      box-shadow: 0 2px 6px rgba(91, 94, 246, 0.4);
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    input[type="range"]:hover::-webkit-slider-thumb {
      transform: scale(1.1);
    }

    input[type="range"]:active::-webkit-slider-thumb {
      transform: scale(0.95);
      box-shadow: 0 1px 4px rgba(91, 94, 246, 0.4);
    }

    input[type="range"]:focus {
      outline: none;
    }

    input[type="range"]:focus-visible::-webkit-slider-thumb {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    a {
      color: var(--primary);
      text-decoration: underline;
      text-underline-offset: 2px;
      font-weight: 600;
      transition: opacity 0.12s ease;
      border-radius: 4px;
    }

    a:hover {
      text-decoration: underline;
      opacity: 0.8;
    }

    a:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
      border-radius: 2px;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      background: rgba(91, 94, 246, 0.10);
      border: 1px solid rgba(91, 94, 246, 0.18);
      padding: 1px 6px;
      border-radius: 999px;
      word-break: break-all;
    }

    button.primary {
      width: 100%;
      padding: 12px 12px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);
      color: #ffffff;
      border: none;
      border-radius: 12px;
      font-size: 13.5px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 12px 24px rgba(91, 94, 246, 0.24);
      transition: all 0.15s ease;
    }

    @media (prefers-color-scheme: dark) {
      button.primary {
        box-shadow: 0 12px 24px rgba(129, 140, 248, 0.30);
      }
    }

    button.primary:hover {
      opacity: 0.92;
      box-shadow: 0 14px 28px rgba(91, 94, 246, 0.32);
      transform: translateY(-1px);
    }

    @media (prefers-color-scheme: dark) {
      button.primary:hover {
        box-shadow: 0 14px 28px rgba(129, 140, 248, 0.38);
      }
    }

    button.primary:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 4px 12px rgba(91, 94, 246, 0.20);
    }

    @media (prefers-color-scheme: dark) {
      button.primary:active {
        box-shadow: 0 4px 12px rgba(129, 140, 248, 0.25);
      }
    }

    button.secondary {
      width: 100%;
      padding: 10px 12px;
      background: rgba(15, 23, 42, 0.03);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 12px;
      font-size: 12.5px;
      font-weight: 650;
      cursor: pointer;
      margin-top: 8px;
      transition: all 0.15s ease;
    }

    button.secondary:hover {
      background: rgba(15, 23, 42, 0.06);
      border-color: rgba(91, 94, 246, 0.28);
    }

    button.secondary:active {
      transform: translateY(1px) scale(0.98);
    }

    button.secondary:focus-visible {
      background: rgba(91, 94, 246, 0.04);
    }

    .button-stack {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
    }

    .button-stack > button {
      margin-top: 0 !important;
    }

    .style-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .style-option {
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 12px;
      font-weight: 650;
      cursor: pointer;
      transition: all 0.12s ease;
      background: rgba(15, 23, 42, 0.02);
      user-select: none;
    }

    .style-option:hover {
      border-color: var(--primary);
      background: rgba(91, 94, 246, 0.08);
      transform: translateY(-1px);
    }

    .style-option:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    .style-option:active {
      transform: translateY(1px) scale(0.98);
    }

    .style-option.selected {
      background: linear-gradient(135deg, rgba(91, 94, 246, 0.18) 0%, rgba(124, 58, 237, 0.14) 100%);
      color: var(--text);
      border-color: rgba(91, 94, 246, 0.40);
      box-shadow: 0 4px 12px rgba(91, 94, 246, 0.12);
    }

    .contact-list {
      max-height: none;
      overflow: visible;
    }

    .contact-item {
      display: flex;
      padding: 12px;
      flex-direction: column;
      gap: 10px;
      border: 1px solid var(--border);
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.02);
      margin-bottom: 10px;
      transition: background 0.12s ease, border-color 0.12s ease;
    }

    .contact-item:hover {
      background: rgba(15, 23, 42, 0.04);
      border-color: rgba(15, 23, 42, 0.15);
    }

    .contact-header {
      display: flex;
      align-items: center;
      width: 100%;
      gap: 12px;
    }

    .contact-avatar {
      flex: none;
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      font-weight: 800;
      box-shadow: 0 10px 18px rgba(91, 94, 246, 0.24);
    }

    .contact-info {
      flex: 1;
      min-width: 0;
    }

    .contact-name {
      font-weight: 750;
      font-size: 13px;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .contact-meta {
      font-size: 11.5px;
      color: var(--muted);
      margin-top: 1px;
    }

    .contact-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-start;
      padding-left: 50px;
      box-sizing: border-box;
    }

    .reset-pref-btn,
    .clear-memory-btn,
    .clear-contact-btn {
      padding: 7px 10px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.70);
      color: rgba(15, 23, 42, 0.80);
      cursor: pointer;
      font-size: 12px;
      font-weight: 650;
      transition: all 0.15s ease;
    }

    .reset-pref-btn:hover,
    .clear-memory-btn:hover,
    .clear-contact-btn:hover {
      background: rgba(255, 255, 255, 0.95);
      border-color: rgba(91, 94, 246, 0.30);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.05);
    }

    .reset-pref-btn:active,
    .clear-memory-btn:active,
    .clear-contact-btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: none;
    }

    .clear-contact-btn:hover {
      border-color: rgba(239, 68, 68, 0.35);
      color: var(--danger);
    }

    .empty-state {
      text-align: center;
      padding: 24px;
      color: var(--muted);
    }

    .shortcut-hint {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 12px;
      color: rgba(15, 23, 42, 0.80);
      border: 1px solid var(--border);
      background: rgba(91, 94, 246, 0.08);
    }

    .shortcut-hint kbd {
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(15, 23, 42, 0.10);
      border-bottom-color: rgba(15, 23, 42, 0.20);
      border-radius: 8px;
      padding: 2px 6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    @media (prefers-color-scheme: dark) {
      .shortcut-hint kbd {
        background: rgba(30, 41, 59, 0.85);
        border: 1px solid rgba(241, 245, 249, 0.15);
        border-bottom-color: rgba(241, 245, 249, 0.25);
        color: var(--text);
      }
    }

    .style-stats {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      width: 100%;
      padding-left: 50px;
    }

    .memory-box {
      width: 100%;
      padding-left: 50px;
      padding-bottom: 4px;
      font-size: 12px;
      color: rgba(15, 23, 42, 0.82);
      line-height: 1.5;
    }

    .memory-title {
      font-weight: 750;
      color: rgba(15, 23, 42, 0.92);
      margin-top: 4px;
      margin-bottom: 2px;
    }

    .memory-text {
      white-space: pre-wrap;
      word-break: break-word;
      color: var(--muted);
    }

    .style-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(91, 94, 246, 0.10);
      color: rgba(15, 23, 42, 0.80);
      font-size: 12px;
      border: 1px solid rgba(91, 94, 246, 0.18);
    }

    .style-pill strong {
      font-weight: 800;
      color: rgba(15, 23, 42, 0.92);
    }

    .muted {
      color: var(--muted);
      font-size: 12px;
    }

    .hidden {
      display: none;
    }

    .fallback-card {
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.02);
      box-shadow: var(--shadow-sm);
    }
  </style>
</head>
<body>
  <div class="header">
    <span>ğŸ’¬</span>
    <h1>Social Copilot</h1>
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="settings">è®¾ç½®</button>
    <button class="tab" data-tab="contacts">è”ç³»äºº</button>
    <button class="tab" data-tab="about">å…³äº</button>
  </div>

  <!-- è®¾ç½®é¡µ -->
  <div id="settings" class="tab-content active">
    <div id="status" class="status warning">æ­£åœ¨æ£€æŸ¥çŠ¶æ€...</div>

    <div class="fallback-card" style="margin-top: 12px;">
      <div class="form-group" style="margin-bottom: 10px;">
        <label style="font-weight: 600;">éšç§å‘ŠçŸ¥ï¼ˆå¿…é€‰ï¼‰</label>
        <small class="muted">ç”Ÿæˆå»ºè®®æ—¶ä¼šå°†å¿…è¦çš„å¯¹è¯ä¸Šä¸‹æ–‡å‘é€åˆ°ä½ é€‰æ‹©çš„ç¬¬ä¸‰æ–¹æ¨¡å‹æœåŠ¡</small>
      </div>
      <div class="form-group inline" style="margin-bottom: 0;">
        <label for="privacyAcknowledged" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="privacyAcknowledged">
          æˆ‘å·²ç†è§£å¹¶åŒæ„ä¸Šè¿°è¯´æ˜
        </label>
      </div>
    </div>

    <div class="form-group">
      <label for="provider">æ¨¡å‹æä¾›å•†</label>
      <select id="provider">
        <option value="deepseek">DeepSeek (æ¨è)</option>
        <option value="openai">OpenAI</option>
        <option value="claude">Claude</option>
      </select>
    </div>

    <div class="form-group">
      <label for="baseUrl">Base URLï¼ˆå¯é€‰ï¼‰</label>
      <input type="text" id="baseUrl" placeholder="ä¾‹å¦‚ï¼šhttps://api.deepseek.com" autocomplete="off">
      <small id="baseUrlHint" class="muted">ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤ï¼›ä»…æ”¯æŒå®˜æ–¹åŸŸåï¼›ä¸è¦åŒ…å« <code>/v1</code></small>
    </div>

    <div class="form-group inline">
      <label for="allowInsecureHttp" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="allowInsecureHttp">
        å…è®¸ http Base URL
      </label>
      <small>ä»…ç”¨äºæœ¬åœ°ä»£ç†æˆ–æµ‹è¯•ç¯å¢ƒï¼ˆå¯èƒ½é™ä½å®‰å…¨æ€§ï¼‰</small>
    </div>

    <div class="form-group inline">
      <label for="allowPrivateHosts" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="allowPrivateHosts">
        å…è®¸æœ¬åœ°/ç§æœ‰åœ°å€
      </label>
      <small>ç”¨äºè®¿é—® localhost æˆ–å†…ç½‘ä»£ç†</small>
    </div>

    <div class="form-group">
      <label for="model">æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰</label>
      <input type="text" id="model" placeholder="ä¾‹å¦‚ï¼šdeepseek-v3.2" list="modelSuggestions" autocomplete="off">
      <datalist id="modelSuggestions"></datalist>
      <small id="modelHint" class="muted">ä¸å¡«å†™åˆ™ä½¿ç”¨é»˜è®¤æ¨¡å‹</small>
    </div>

    <div class="form-group">
      <label for="apiKey">API Key</label>
      <input type="password" id="apiKey" placeholder="sk-...">
      <small id="apiKeyHint">
        <a href="https://platform.deepseek.com/" target="_blank" rel="noopener noreferrer">è·å– DeepSeek API Key</a>
      </small>
    </div>

    <div class="form-group inline">
      <label for="persistApiKey" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="persistApiKey">
        è®°ä½ API Key
      </label>
      <small>ä¸å‹¾é€‰åˆ™å¯†é’¥ä»…æœ¬æ¬¡æµè§ˆå™¨ä¼šè¯æœ‰æ•ˆï¼ˆé‡å¯æµè§ˆå™¨éœ€é‡æ–°è¾“å…¥ï¼‰</small>
    </div>

    <div class="form-group inline">
      <label for="enableMemory" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="enableMemory">
        å¯ç”¨é•¿æœŸè®°å¿†
      </label>
      <small>åå°ä¼šæç‚¼å¹¶å­˜å‚¨è”ç³»äººæ‘˜è¦ï¼ˆé»˜è®¤å…³é—­ï¼‰</small>
    </div>

    <div class="form-group">
      <label for="language">å›å¤è¯­è¨€</label>
      <select id="language">
        <option value="auto">è‡ªåŠ¨ï¼ˆæ¨èï¼‰</option>
        <option value="zh">ä¸­æ–‡</option>
        <option value="en">English</option>
      </select>
      <small class="muted">é€‰æ‹© auto æ—¶æŒ‰å½“å‰å¯¹è¯è‡ªåŠ¨å†³å®šä¸­/è‹±æ–‡è¾“å‡º</small>
    </div>

    <div class="form-group">
      <label for="temperature">æ¸©åº¦ï¼ˆ0-100ï¼‰<span id="temperatureValue" class="muted" style="margin-left: 6px;">80</span></label>
      <input type="range" id="temperature" min="0" max="100" step="1" value="80">
      <small class="muted">è¶Šé«˜è¶Šå‘æ•£ï¼Œè¶Šä½è¶Šç¨³å®š</small>
    </div>

    <div class="form-group inline">
      <label for="autoInGroups" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="autoInGroups">
        ç¾¤èŠè‡ªåŠ¨å¼¹å‡º
      </label>
      <small>é»˜è®¤å…³é—­ï¼›ç¾¤èŠä¸­ä»å¯æŒ‰ Alt+S æ‰‹åŠ¨è§¦å‘</small>
    </div>

    <div class="form-group inline">
      <label for="autoTrigger" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="autoTrigger" checked>
        æ”¶åˆ°æ¶ˆæ¯è‡ªåŠ¨ç”Ÿæˆå»ºè®®
      </label>
      <small>å…³é—­åä»…å¯æŒ‰ Alt+S æ‰‹åŠ¨è§¦å‘</small>
    </div>

    <div class="form-group inline">
      <label for="autoAgent" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="autoAgent">
        è‡ªåŠ¨ä»£ç†ï¼ˆæ”¶åˆ°æ¶ˆæ¯è‡ªåŠ¨å‘é€ï¼‰
      </label>
      <small class="muted">é»˜è®¤å…³é—­ï¼›å¼€å¯åä¼šå°è¯•è‡ªåŠ¨å¡«å……å¹¶æŒ‰ Enter å‘é€ï¼ˆä¸åŒå¹³å°å¯èƒ½æ— æ•ˆæˆ–éœ€æ‰‹åŠ¨ç¡®è®¤ï¼‰</small>
    </div>

    <div class="fallback-card" style="margin-top: 12px;">
      <div class="form-group" style="margin-bottom: 10px;">
        <label style="font-weight: 600;">æç¤ºè¯</label>
        <small class="muted">ç”¨äºå¢å¼ºç¨³å®šæ€§ä¸ä¸ªæ€§åŒ–ï¼›ä¼šè¿½åŠ åˆ°é»˜è®¤æç¤ºè¯åï¼ˆä¸å½±å“å¯¹è¯å†…å®¹è„±æ•ï¼‰</small>
      </div>

      <div class="form-group">
        <label for="customSystemPrompt">è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆå¯é€‰ï¼‰</label>
        <textarea id="customSystemPrompt" rows="4" placeholder="ä¾‹å¦‚ï¼šé¿å…è¿‡åº¦çƒ­æƒ…ï¼›å°½é‡ç®€çŸ­ï¼›ä¸è¦ä½¿ç”¨è¡¨æƒ…ç¬¦å·ã€‚å¯ç”¨å˜é‡ï¼š{{contact_name}} {{app}} {{is_group}}"></textarea>
      </div>

      <div class="form-group" style="margin-bottom: 0;">
        <label for="customUserPrompt">è‡ªå®šä¹‰ç”¨æˆ·æç¤ºè¯ï¼ˆå¯é€‰ï¼‰</label>
        <textarea id="customUserPrompt" rows="4" placeholder="ä¾‹å¦‚ï¼šå¦‚æœå¯¹æ–¹æå‡ºé—®é¢˜ï¼Œå…ˆç¡®è®¤éœ€æ±‚å†ç»™å»ºè®®ã€‚å¯ç”¨å˜é‡ï¼š{{contact_name}} {{styles}}"></textarea>
      </div>
    </div>

    <div class="fallback-card" style="margin-top: 12px;">
      <div class="form-group" style="margin-bottom: 10px;">
        <label style="font-weight: 600;">éšç§ä¸å‘é€èŒƒå›´</label>
        <small class="muted">ç”¨äºæ§åˆ¶å‘é€ç»™æ¨¡å‹çš„ä¸Šä¸‹æ–‡å¤§å°ä¸è„±æ•ç­–ç•¥ï¼ˆä¸å½±å“æœ¬åœ°å­˜å‚¨ï¼‰</small>
      </div>

      <div class="form-group inline" style="margin-bottom: 10px;">
        <label for="redactPii" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="redactPii" checked>
          å‘é€å‰è„±æ•ï¼ˆé‚®ç®±/æ‰‹æœºå·/é“¾æ¥ï¼‰
        </label>
      </div>

      <div class="form-group inline" style="margin-bottom: 10px;">
        <label for="anonymizeSenders" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="anonymizeSenders" checked>
          ä¸å‘é€æ˜µç§°ï¼ˆç”¨ã€Œæˆ‘/å¯¹æ–¹ã€æ›¿ä»£ï¼‰
        </label>
      </div>

      <div class="form-group">
        <label for="contextMessageLimit">å‘é€æœ€è¿‘æ¶ˆæ¯æ¡æ•°</label>
        <input type="number" id="contextMessageLimit" min="1" max="50" placeholder="10">
        <small class="muted">ä»…å½±å“å‘é€ç»™æ¨¡å‹çš„ä¸Šä¸‹æ–‡ï¼ˆå½“å‰æ¶ˆæ¯å§‹ç»ˆåŒ…å«ï¼‰</small>
      </div>

      <div class="form-group">
        <label for="maxCharsPerMessage">å•æ¡æ¶ˆæ¯æœ€å¤§å­—ç¬¦æ•°</label>
        <input type="number" id="maxCharsPerMessage" min="50" max="4000" placeholder="500">
      </div>

      <div class="form-group" style="margin-bottom: 0;">
        <label for="maxTotalChars">ä¸Šä¸‹æ–‡æ€»å­—ç¬¦é¢„ç®—</label>
        <input type="number" id="maxTotalChars" min="200" max="20000" placeholder="4000">
      </div>
    </div>

    <div class="form-group inline">
      <label for="enableFallback" style="margin: 0; font-weight: 600;">
        <input type="checkbox" id="enableFallback">
        å¯ç”¨å¤‡ç”¨æ¨¡å‹
      </label>
      <small>ä¸»æ¨¡å‹å¼‚å¸¸æ—¶è‡ªåŠ¨åˆ‡æ¢</small>
    </div>

    <div id="fallbackFields" class="fallback-card hidden">
      <div class="form-group">
        <label for="fallbackProvider">å¤‡ç”¨æ¨¡å‹</label>
        <select id="fallbackProvider">
          <option value="deepseek">DeepSeek</option>
          <option value="openai">OpenAI</option>
          <option value="claude">Claude</option>
        </select>
      </div>

      <div class="form-group">
        <label for="fallbackBaseUrl">å¤‡ç”¨ Base URLï¼ˆå¯é€‰ï¼‰</label>
        <input type="text" id="fallbackBaseUrl" placeholder="ä¾‹å¦‚ï¼šhttps://api.deepseek.com" autocomplete="off">
        <small id="fallbackBaseUrlHint" class="muted">ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤ï¼›ä»…æ”¯æŒå®˜æ–¹åŸŸåï¼›ä¸è¦åŒ…å« <code>/v1</code></small>
      </div>

      <div class="form-group inline">
        <label for="fallbackAllowInsecureHttp" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="fallbackAllowInsecureHttp">
          å…è®¸å¤‡ç”¨ http Base URL
        </label>
        <small>ä»…ç”¨äºæœ¬åœ°ä»£ç†æˆ–æµ‹è¯•ç¯å¢ƒ</small>
      </div>

      <div class="form-group inline">
        <label for="fallbackAllowPrivateHosts" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="fallbackAllowPrivateHosts">
          å…è®¸å¤‡ç”¨æœ¬åœ°/ç§æœ‰åœ°å€
        </label>
        <small>ç”¨äºè®¿é—®å¤‡ç”¨ localhost æˆ–å†…ç½‘ä»£ç†</small>
      </div>

      <div class="form-group">
        <label for="fallbackModel">å¤‡ç”¨æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰</label>
        <input type="text" id="fallbackModel" placeholder="ä¾‹å¦‚ï¼šdeepseek-r1-0528" list="fallbackModelSuggestions" autocomplete="off">
        <datalist id="fallbackModelSuggestions"></datalist>
        <small id="fallbackModelHint" class="muted">ä¸å¡«å†™åˆ™ä½¿ç”¨è¯¥æä¾›å•†é»˜è®¤æ¨¡å‹</small>
      </div>

      <div class="form-group">
      <label for="fallbackApiKey">å¤‡ç”¨ API Key</label>
      <input type="password" id="fallbackApiKey" placeholder="sk-...">
      <small id="fallbackApiKeyHint">
          <a href="https://platform.deepseek.com/" target="_blank" rel="noopener noreferrer">è·å– DeepSeek API Key</a>
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>é»˜è®¤å›å¤é£æ ¼</label>
      <div class="style-options">
        <span class="style-option selected" data-style="caring" tabindex="0">ğŸ’— å…³å¿ƒ</span>
        <span class="style-option selected" data-style="humorous" tabindex="0">ğŸ˜„ å¹½é»˜</span>
        <span class="style-option selected" data-style="casual" tabindex="0">ğŸ˜Š éšæ„</span>
        <span class="style-option" data-style="rational" tabindex="0">ğŸ§  ç†æ€§</span>
        <span class="style-option" data-style="formal" tabindex="0">ğŸ“ æ­£å¼</span>
      </div>
    </div>

    <div class="form-group">
      <label for="suggestionCount">æ¯æ¬¡æ˜¾ç¤ºçš„å›å¤æ•°é‡</label>
      <select id="suggestionCount">
        <option value="3">3 æ¡ï¼ˆé»˜è®¤ï¼‰</option>
        <option value="2">2 æ¡</option>
      </select>
      <small class="muted">å½±å“æ¯æ¬¡ç”Ÿæˆçš„å›å¤å»ºè®®æ¡æ•°</small>
    </div>

    <button id="testConnectionBtn" class="secondary">æµ‹è¯•è¿æ¥</button>
    <button id="saveBtn" class="primary">ä¿å­˜è®¾ç½®</button>

    <div class="shortcut-hint">
      ğŸ’¡ å¿«æ·é”®ï¼šæŒ‰ <kbd>Alt</kbd> + <kbd>S</kbd> æ‰‹åŠ¨è§¦å‘å»ºè®®
    </div>
  </div>

  <!-- è”ç³»äººé¡µ -->
  <div id="contacts" class="tab-content">
    <div class="status info" style="margin-bottom: 10px;">
      <strong>æ”¯æŒå¹³å°</strong><br>
      Telegram Webã€WhatsApp Webã€Slack Web
    </div>
    <div class="muted" style="font-size: 12px; line-height: 1.4; margin: 0 0 12px;">
      è”ç³»äººè®°å½•æ¥è‡ªä»¥ä¸Šå¹³å°çš„å¯¹è¯ï¼ˆä»…æœ¬åœ°å­˜å‚¨ï¼Œä¸å±•ç¤ºåŸæ–‡å¯¹è¯ï¼‰ã€‚
    </div>
    <div id="contactList" class="contact-list">
      <div class="empty-state">æš‚æ— è”ç³»äººè®°å½•</div>
    </div>
  </div>

  <!-- å…³äºé¡µ -->
  <div id="about" class="tab-content">
    <div class="status info">
      <strong id="aboutVersion">Social Copilot</strong><br>
      AI è¾…åŠ©ç¤¾äº¤ä¼´ä¾£
    </div>
    <p style="font-size: 13px; color: var(--muted); line-height: 1.6;">
      ä¸ºèŠå¤©åº”ç”¨æä¾›æ™ºèƒ½å›å¤å»ºè®®ï¼Œæ”¯æŒ Telegram Webã€WhatsApp Webã€Slack Webã€‚
    </p>
    <p style="font-size: 13px; color: var(--muted); line-height: 1.6; margin-top: 12px;">
      æ‰€æœ‰æ•°æ®é»˜è®¤å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¿æŠ¤æ‚¨çš„éšç§ã€‚
    </p>
    <p style="font-size: 13px; color: var(--muted); line-height: 1.6; margin-top: 12px;">
      æç¤ºï¼šç”Ÿæˆå›å¤æ—¶ä¼šå°†â€œå¿…è¦çš„å¯¹è¯ä¸Šä¸‹æ–‡â€å‘é€åˆ°ä½ é€‰æ‹©çš„ç¬¬ä¸‰æ–¹æ¨¡å‹æœåŠ¡ï¼›å¯åœ¨è®¾ç½®é¡µçš„ã€Œéšç§ä¸å‘é€èŒƒå›´ã€ä¸­é…ç½®è„±æ•/åŒ¿ååŒ–ä¸å‘é€ä¸Šé™ã€‚
    </p>
    <p style="font-size: 12px; color: var(--muted-2); line-height: 1.6; margin-top: 8px;">
      ä¸Šæ¶å‘å¸ƒæ—¶å»ºè®®æä¾›å…¬å¼€çš„éšç§æ”¿ç­– URLï¼ˆæ¨¡æ¿è§é¡¹ç›®æ–‡æ¡£ `docs/PRIVACY.md`ï¼‰ã€‚
    </p>

    <div class="fallback-card" style="margin-top: 12px;">
      <div class="form-group" style="margin-bottom: 12px;">
        <label style="font-weight: 600;">å¤‡ä»½ä¸æ¢å¤</label>
        <small class="muted">å¯¼å‡º/å¯¼å…¥è”ç³»äººç”»åƒã€é£æ ¼åå¥½ä¸é•¿æœŸè®°å¿†ï¼ˆä¸åŒ…å« API Keyï¼Œä¹Ÿä¸åŒ…å«åŸæ–‡å¯¹è¯æ¶ˆæ¯ï¼‰ã€‚</small>
      </div>
      <div class="button-stack">
        <button id="exportUserDataBtn" class="secondary">å¯¼å‡ºæ•°æ®å¤‡ä»½</button>
        <button id="importUserDataBtn" class="secondary">å¯¼å…¥æ•°æ®å¤‡ä»½</button>
      </div>
      <input id="importUserDataFile" class="hidden" type="file" accept="application/json">
      <small class="muted" style="display: block; margin-top: 8px;">æ³¨æ„ï¼šå¤‡ä»½æ–‡ä»¶åŒ…å«æœ¬åœ°ç”»åƒ/è®°å¿†ç­‰éšç§ä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ã€‚</small>
    </div>

    <button id="clearDataBtn" class="secondary">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>

    <div class="fallback-card" style="margin-top: 12px;">
      <div class="form-group inline" style="margin-bottom: 12px;">
        <label for="debugEnabled" style="margin: 0; font-weight: 600;">
          <input type="checkbox" id="debugEnabled">
          å¯ç”¨è¯Šæ–­æ—¥å¿—
        </label>
        <small class="muted">è®°å½•æœ€è¿‘è¯·æ±‚ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜</small>
      </div>
      <div class="button-stack">
        <button id="copyDiagnosticsBtn" class="secondary">å¤åˆ¶è¯Šæ–­ä¿¡æ¯</button>
        <button id="downloadDiagnosticsBtn" class="secondary">ä¸‹è½½è¯Šæ–­ JSON</button>
        <button id="clearDiagnosticsBtn" class="secondary">æ¸…ç©ºè¯Šæ–­æ—¥å¿—</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
